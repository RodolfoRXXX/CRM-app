
<div class="card dialog">
    <div class="d-flex justify-content-between align-items-start pb-3 b-b">
        <div class="d-flex flex-column align-items-start">
            <h4 class="cap mb-0">Definir estado del remito</h4>
            <p class="mb-0 fs-09">Edit치 el estado de los productos asociados a este remito</p>
        </div>
        <a mat-icon-button class="" routerLink="#" aria-label="close-button" (click)="closeDialog(false)">
            <mat-icon>close</mat-icon>
        </a>
    </div>
    <!-- cargando... -->
    <div class="d-flex justify-content-center p-3" *ngIf="load">
        <h4>Cargando...</h4>
    </div>
    <!-- Table of orders -->
    <div *ngIf="dataSource.data.length">
        <table mat-table [dataSource]="dataSource">
        
            <!-- ID Column -->
            <ng-container matColumnDef="sku">
                <th mat-header-cell *matHeaderCellDef class="text-muted fs-08 fw-400 max-500-hidden">sku</th>
                <td mat-cell *matCellDef="let element" class="max-500-hidden">
                    <p class="mb-0 text-muted fs-09">{{ element.sku }}</p>
                </td>
            </ng-container>

            <!-- product Column -->
            <ng-container matColumnDef="product">
            <th mat-header-cell *matHeaderCellDef class="text-muted fs-08 fw-400"> PRODUCTO </th>
            <td mat-cell *matCellDef="let element">
                <div class="data-column">
                    <div class="text-data text-data-box">
                        <span class="name-data">
                            {{ element.name || 'Sin informaci칩n' }}
                        </span>
                        <small class="description-product fs-08 text-muted max-1150-hidden" matTooltip="{{ element.description }}" matTooltipPosition="above">
                            {{ element.description || 'Sin informaci칩n' }}
                        </small>
                        <small class="description-product text-muted max-1150-hidden">
                            <span class="fs-08">Color: 
                                <span class="material-icons fs-09" [style.color]="element.option_1" style="position: relative; top: 3px;">
                                square
                                </span>
                            </span>
                            <span class="ms-2 fs-08">{{ this._auth.getOptionName2() || 'Opci칩n 2' }}: </span><span class="fw-500">{{ element.option_2 }}</span>
                        </small>
                    </div>
                </div>
            </td>
            </ng-container>

            <!-- qty column -->
            <ng-container matColumnDef="qty">
            <th mat-header-cell *matHeaderCellDef class="text-muted fs-08 fw-400"> CANTIDAD </th>
            <td mat-cell *matCellDef="let element">
                <p class="mb-0 ms-4">{{ element.qty || 0 }}</p>
            </td>
            </ng-container>

            <!-- status column -->
            <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef class="text-muted fs-08 fw-400"> ESTADO </th>
                <td mat-cell *matCellDef="let element">
                    <mat-form-field appearance="outline" style="margin-bottom: -25px;">
                        <mat-label>Estado</mat-label>
                        <mat-select [value]="element.status" (selectionChange)="changeState(element, $event)">
                            <ng-container *ngFor="let item of order_status">
                                <mat-option [value]="item.id" [disabled]="(item.id == 5) || ((element.status == 1)?(item.id == 4):false) || ((element.status == 4)?(item.id == 2):false)">
                                    <span class="badge rounded-pill cap fs-08"
                                        [style.color]="item.color"
                                        [style.background-color]="item.bgColor">
                                        {{ item.status }}
                                    </span>
                                </mat-option>
                            </ng-container>
                        </mat-select>
                    </mat-form-field>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="bill-row"></tr>
        </table>            
    </div>
    <!-- Footer -->
     <div class="b-t mt-3 pt-3 d-flex justify-content-between">
        <button class="me-2" mat-flat-button color="warn">
            Cerrar todo
        </button>
        <button mat-flat-button color="primary" [disabled]="dataForm.invalid || loading" (click)="updateState()">
            Confirmar cambios
        </button>
     </div>
</div>
<mat-card-footer class="login-footer">
    <mat-progress-bar mode="indeterminate" *ngIf="loading"></mat-progress-bar>
</mat-card-footer>