<!--Componente que edita los artículos del remito -->

<mat-card class="card card-data">
    <mat-card-header>
      <mat-card-title>Detalle del remito</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <!-- cargando... -->
      <div class="d-flex justify-content-center p-2" *ngIf="load">
        <h4>Cargando...</h4>
      </div>
      <!-- Table of orders -->
      <div class="box-list" *ngIf="dataSource.data">
          <table mat-table [dataSource]="dataSource" class="mt-1">
          
              <!-- ID Column -->
              <ng-container matColumnDef="id">
                  <th mat-header-cell *matHeaderCellDef class="text-muted fs-08 fw-400 max-500-hidden">ID</th>
                  <td mat-cell *matCellDef="let element" class="max-500-hidden">
                      <p class="mb-0">#{{ element.id_product }}</p>
                  </td>
              </ng-container>

              <!-- product Column -->
              <ng-container matColumnDef="product">
                <th mat-header-cell *matHeaderCellDef class="text-muted fs-08 fw-400"> PRODUCTO </th>
                <td mat-cell *matCellDef="let element">
                    <div class="data-column">
                        <div class="me-2 max-1150-hidden">
                            <div class="avatar image-data">
                                <img class="rounded-circle" [src]="uriImg + element.image || uriImg + 'no-image.png'">
                            </div>
                        </div>
                        <div class="text-data text-data-box">
                            <span class="name-data">
                                {{ element.name || 'Sin información' }}
                            </span>
                            <small class="description-product fs-07 text-muted max-1150-hidden" matTooltip="{{ element.description }}" matTooltipPosition="above">
                                {{ element.description || 'Sin información' }}
                            </small>
                        </div>
                    </div>
                </td>
              </ng-container>

              <!-- qty column -->
              <ng-container matColumnDef="qty">
                  <th mat-header-cell *matHeaderCellDef class="text-muted fs-08 fw-400"> CANTIDAD </th>
                  <td mat-cell *matCellDef="let element">
                    <p class="mb-0 ms-4">{{ element.qty || 0 }}</p>
                  </td>
              </ng-container>

              <!-- edit Column -->
              <ng-container matColumnDef="edit">
                  <th mat-header-cell *matHeaderCellDef></th>
                  <td mat-cell *matCellDef="let element">
                      <button mat-icon-button color="primary" (click)="editProduct(element.id_product)">
                          <mat-icon style="position: relative; bottom: 2px;">edit</mat-icon>
                      </button>
                  </td>
              </ng-container>
          
              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="bill-row"></tr>
          </table>            
      </div>
      <!-- Recharge button -->
      <div class="recharge" *ngIf="recharge">
          <!-- Botón para recargar los datos -->
          <button mat-raised-button color="accent" (click)="rechargeData()">Recargar los datos</button>
      </div>
      <!-- No products -->
      <div class="d-flex justify-content-center align-items-center p-4" *ngIf="!dataSource.data.length">
        <h4>Todavía no cargaste ningún producto</h4>
      </div>
      <!-- new products -->
      <div>
        <button mat-icon-button color="primary" (click)="editProduct()">
          <mat-icon style="position: relative; bottom: 2px;">add_circle_outline</mat-icon>
        </button>
      </div>
    </mat-card-content>
    <!-- Caja que muestra un texto de "Cargando..." y luego el listado -->
    <mat-card-footer class="login-footer">
      <mat-progress-bar mode="indeterminate" *ngIf="loading"></mat-progress-bar>
    </mat-card-footer>
</mat-card>
